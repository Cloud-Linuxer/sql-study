-- SQL Study Database Initialization
-- 데이터베이스 초기화 스크립트

SET NAMES utf8mb4;
SET CHARACTER SET utf8mb4;

-- stores 테이블 생성
CREATE TABLE IF NOT EXISTS stores (
    col1 VARCHAR(50) PRIMARY KEY COMMENT '상가업소번호',
    col2 VARCHAR(200) COMMENT '상호명',
    col3 VARCHAR(100) COMMENT '지점명',
    col4 VARCHAR(10) COMMENT '상권업종대분류코드',
    col5 VARCHAR(50) COMMENT '상권업종대분류명',
    col6 VARCHAR(10) COMMENT '상권업종중분류코드',
    col7 VARCHAR(50) COMMENT '상권업종중분류명',
    col8 VARCHAR(10) COMMENT '상권업종소분류코드',
    col9 VARCHAR(100) COMMENT '상권업종소분류명',
    col10 VARCHAR(20) COMMENT '표준산업분류코드',
    col11 VARCHAR(100) COMMENT '표준산업분류명',
    col12 VARCHAR(10) COMMENT '시도코드',
    col13 VARCHAR(20) COMMENT '시도명',
    col14 VARCHAR(10) COMMENT '시군구코드',
    col15 VARCHAR(20) COMMENT '시군구명',
    col16 VARCHAR(20) COMMENT '행정동코드',
    col17 VARCHAR(50) COMMENT '행정동명',
    col18 VARCHAR(20) COMMENT '법정동코드',
    col19 VARCHAR(50) COMMENT '법정동명',
    col20 VARCHAR(20) COMMENT '지번코드',
    col21 VARCHAR(5) COMMENT '대지구분코드',
    col22 VARCHAR(10) COMMENT '대지구분명',
    col23 VARCHAR(10) COMMENT '지번본번지',
    col24 VARCHAR(10) COMMENT '지번부번지',
    col25 VARCHAR(200) COMMENT '지번주소',
    col26 VARCHAR(20) COMMENT '도로명코드',
    col27 VARCHAR(100) COMMENT '도로명',
    col28 VARCHAR(10) COMMENT '건물본번지',
    col29 VARCHAR(10) COMMENT '건물부번지',
    col30 VARCHAR(50) COMMENT '건물관리번호',
    col31 VARCHAR(100) COMMENT '건물명',
    col32 VARCHAR(200) COMMENT '도로명주소',
    col33 VARCHAR(10) COMMENT '구우편번호',
    col34 VARCHAR(10) COMMENT '신우편번호',
    col35 VARCHAR(50) COMMENT '동정보',
    col36 VARCHAR(20) COMMENT '층정보',
    col37 VARCHAR(20) COMMENT '호정보',
    col38 DECIMAL(12, 8) COMMENT '경도',
    col39 DECIMAL(12, 8) COMMENT '위도',
    INDEX idx_col5 (col5),
    INDEX idx_col7 (col7),
    INDEX idx_col13 (col13),
    INDEX idx_col15 (col15),
    INDEX idx_col17 (col17)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- users 테이블 생성 (Google OAuth용)
CREATE TABLE IF NOT EXISTS users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    google_id VARCHAR(100) UNIQUE NOT NULL,
    email VARCHAR(255) NOT NULL,
    name VARCHAR(100),
    profile_picture VARCHAR(500),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_login TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- query_logs 테이블 생성 (쿼리 기록용)
CREATE TABLE IF NOT EXISTS query_logs (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    query_text TEXT NOT NULL,
    execution_time INT COMMENT 'milliseconds',
    row_count INT DEFAULT 0,
    success BOOLEAN DEFAULT TRUE,
    error_message TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE SET NULL,
    INDEX idx_user_id (user_id),
    INDEX idx_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- 샘플 데이터 삽입 (테스트용)
INSERT INTO stores (col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19, col20, col21, col22, col23, col24, col25, col26, col27, col28, col29, col30, col31, col32, col33, col34, col35, col36, col37, col38, col39) VALUES
('MA0101202208003882516', '스타벅스', '강남역점', 'Q', '음식', 'Q01', '커피점/카페', 'Q01A01', '커피전문점/카페/다방', 'I56220', '커피 전문점', '11', '서울특별시', '11680', '강남구', '1168053000', '역삼1동', '1168010100', '역삼동', '116801010', '1', '대지', '736', '5', '서울특별시 강남구 역삼동 736-5', '116804163203', '테헤란로', '142', '', '1168010100107360005000001', '강남빌딩', '서울특별시 강남구 테헤란로 142', '135080', '06236', '1층', '1층', '', 127.0366, 37.5001),
('MA0101202208003882799', '이디야커피', '선릉역점', 'Q', '음식', 'Q01', '커피점/카페', 'Q01A01', '커피전문점/카페/다방', 'I56220', '커피 전문점', '11', '서울특별시', '11680', '강남구', '1168054000', '삼성1동', '1168010600', '삼성동', '116801060', '1', '대지', '159', '3', '서울특별시 강남구 삼성동 159-3', '116804166019', '선릉로', '525', '', '1168010600101590003000001', '선릉빌딩', '서울특별시 강남구 선릉로 525', '135090', '06159', '1층', '1층', '', 127.0486, 37.5047),
('MA0101202208000132710', '맥도날드', '강남점', 'Q', '음식', 'Q04', '패스트푸드', 'Q04A01', '패스트푸드', 'I56192', '치킨 전문점', '11', '서울특별시', '11680', '강남구', '1168053000', '역삼1동', '1168010100', '역삼동', '116801010', '1', '대지', '824', '2', '서울특별시 강남구 역삼동 824-2', '116804163203', '테헤란로', '152', '', '1168010100108240002000001', '', '서울특별시 강남구 테헤란로 152', '135080', '06236', '', '1층', '', 127.0372, 37.5005),
('MA0101202208009677897', 'CU', '강남역삼점', 'D', '소매', 'D01', '편의점', 'D01A01', '편의점', 'G47122', '편의점', '11', '서울특별시', '11680', '강남구', '1168053000', '역삼1동', '1168010100', '역삼동', '116801010', '1', '대지', '735', '12', '서울특별시 강남구 역삼동 735-12', '116804163203', '테헤란로', '138', '', '1168010100107350012000001', '', '서울특별시 강남구 테헤란로 138', '135080', '06236', '', '1층', '', 127.0360, 37.4998),
('MA0101202208009678175', 'GS25', '강남테헤란점', 'D', '소매', 'D01', '편의점', 'D01A01', '편의점', 'G47122', '편의점', '11', '서울특별시', '11680', '강남구', '1168053000', '역삼1동', '1168010100', '역삼동', '116801010', '1', '대지', '737', '1', '서울특별시 강남구 역삼동 737-1', '116804163203', '테헤란로', '144', '', '1168010100107370001000001', '', '서울특별시 강남구 테헤란로 144', '135080', '06236', '', '1층', '', 127.0368, 37.5002),
('MA0101202208001234567', '올리브영', '강남역점', 'D', '소매', 'D10', '화장품/방향제소매', 'D10A01', '화장품소매', 'G47812', '화장품 및 방향제 소매업', '11', '서울특별시', '11680', '강남구', '1168053000', '역삼1동', '1168010100', '역삼동', '116801010', '1', '대지', '738', '3', '서울특별시 강남구 역삼동 738-3', '116804163203', '테헤란로', '146', '', '1168010100107380003000001', '', '서울특별시 강남구 테헤란로 146', '135080', '06236', '', '1층', '', 127.0370, 37.5003),
('MA0101202208002345678', '본죽', '역삼점', 'Q', '음식', 'Q02', '한식', 'Q02A05', '죽/스프전문', 'I56111', '한식 음식점업', '11', '서울특별시', '11680', '강남구', '1168053000', '역삼1동', '1168010100', '역삼동', '116801010', '1', '대지', '739', '5', '서울특별시 강남구 역삼동 739-5', '116804163203', '테헤란로', '148', '', '1168010100107390005000001', '', '서울특별시 강남구 테헤란로 148', '135080', '06236', '', '1층', '', 127.0371, 37.5004),
('MA0101202208003456789', '교촌치킨', '강남점', 'Q', '음식', 'Q03', '치킨', 'Q03A01', '치킨전문점', 'I56193', '치킨 전문점', '11', '서울특별시', '11680', '강남구', '1168054000', '삼성1동', '1168010600', '삼성동', '116801060', '1', '대지', '160', '2', '서울특별시 강남구 삼성동 160-2', '116804166019', '선릉로', '527', '', '1168010600101600002000001', '', '서울특별시 강남구 선릉로 527', '135090', '06159', '', '1층', '', 127.0488, 37.5049),
('MA0101202208004567890', '다이소', '선릉역점', 'D', '소매', 'D05', '종합소매점', 'D05A01', '종합소매점', 'G47190', '기타 종합 소매업', '11', '서울특별시', '11680', '강남구', '1168054000', '삼성1동', '1168010600', '삼성동', '116801060', '1', '대지', '161', '1', '서울특별시 강남구 삼성동 161-1', '116804166019', '선릉로', '529', '', '1168010600101610001000001', '', '서울특별시 강남구 선릉로 529', '135090', '06159', '', '1층', '', 127.0490, 37.5050),
('MA0101202208005678901', '미용실', '헤어플러스', 'F', '생활서비스', 'F01', '이/미용업', 'F01A01', '미용실', 'S96112', '두발 미용업', '11', '서울특별시', '11680', '강남구', '1168053000', '역삼1동', '1168010100', '역삼동', '116801010', '1', '대지', '740', '2', '서울특별시 강남구 역삼동 740-2', '116804163203', '테헤란로', '150', '', '1168010100107400002000001', '', '서울특별시 강남구 테헤란로 150', '135080', '06236', '', '2층', '', 127.0373, 37.5006),
('MA0101202208006789012', '세븐일레븐', '역삼테헤란점', 'D', '소매', 'D01', '편의점', 'D01A01', '편의점', 'G47122', '편의점', '11', '서울특별시', '11650', '서초구', '1165053000', '서초1동', '1165010100', '서초동', '116501010', '1', '대지', '1300', '5', '서울특별시 서초구 서초동 1300-5', '116504163405', '서초대로', '320', '', '1165010100113000005000001', '', '서울특별시 서초구 서초대로 320', '137070', '06620', '', '1층', '', 127.0250, 37.4920),
('MA0101202208007890123', '빽다방', '서초점', 'Q', '음식', 'Q01', '커피점/카페', 'Q01A01', '커피전문점/카페/다방', 'I56220', '커피 전문점', '11', '서울특별시', '11650', '서초구', '1165053000', '서초1동', '1165010100', '서초동', '116501010', '1', '대지', '1301', '3', '서울특별시 서초구 서초동 1301-3', '116504163405', '서초대로', '322', '', '1165010100113010003000001', '', '서울특별시 서초구 서초대로 322', '137070', '06620', '', '1층', '', 127.0252, 37.4922),
('MA0101202208008901234', '버거킹', '서초역점', 'Q', '음식', 'Q04', '패스트푸드', 'Q04A01', '패스트푸드', 'I56192', '치킨 전문점', '11', '서울특별시', '11650', '서초구', '1165053000', '서초1동', '1165010100', '서초동', '116501010', '1', '대지', '1302', '1', '서울특별시 서초구 서초동 1302-1', '116504163405', '서초대로', '324', '', '1165010100113020001000001', '', '서울특별시 서초구 서초대로 324', '137070', '06620', '', '1층', '', 127.0254, 37.4924),
('MA0101202208009012345', '네일아트', '뷰티네일', 'F', '생활서비스', 'F01', '이/미용업', 'F01A02', '네일숍', 'S96113', '기타 미용업', '11', '서울특별시', '11650', '서초구', '1165053000', '서초1동', '1165010100', '서초동', '116501010', '1', '대지', '1303', '2', '서울특별시 서초구 서초동 1303-2', '116504163405', '서초대로', '326', '', '1165010100113030002000001', '', '서울특별시 서초구 서초대로 326', '137070', '06620', '', '2층', '', 127.0256, 37.4926),
('MA0101202208010123456', '약국', '서초중앙약국', 'P', '의료', 'P01', '약국', 'P01A01', '약국', 'Q47811', '의약품 및 의료용품 소매업', '11', '서울특별시', '11650', '서초구', '1165053000', '서초1동', '1165010100', '서초동', '116501010', '1', '대지', '1304', '1', '서울특별시 서초구 서초동 1304-1', '116504163405', '서초대로', '328', '', '1165010100113040001000001', '', '서울특별시 서초구 서초대로 328', '137070', '06620', '', '1층', '', 127.0258, 37.4928);

-- 완료 메시지
SELECT 'Database initialized successfully!' as message;
